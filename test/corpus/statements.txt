================================================================================
empty
================================================================================

--------------------------------------------------------------------------------

(source_file
  (item))

================================================================================
assignment
================================================================================

foo := "abc"

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item))

================================================================================
expression
================================================================================

foo := "abc" + 'def'

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal))
        (value
          (string_literal)))))
  (item))

================================================================================
paths
================================================================================

relative := "abc" / 'def'
absolute := / "abc"
combined := "foo" / bar() / baz

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal))
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal))
        (value
          (function_call
            (identifier)))
        (value
          (identifier)))))
  (item))

================================================================================
basic strings
================================================================================

foo := "a"
bar := "b
  c
"
baz := "a\"\t"

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal
            (escape_sequence)
            (escape_sequence))))))
  (item))

================================================================================
escape newlines
================================================================================

foo := "a\
b"

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal
            (escape_sequence))))))
  (item))

================================================================================
indented basic strings
================================================================================

foo := """a"""
bar:= """b
  c
"""
baz := """
abc \t
def \"
"""

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal
            (escape_sequence)
            (escape_sequence))))))
  (item))

================================================================================
raw strings
================================================================================

foo := 'a'
bar := 'b
  c
'
baz := 'a\"\t'

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item))

================================================================================
indented raw strings
================================================================================

foo := '''a'''
bar:= '''b
  c
'''
  baz := ''''
  abc \t
  def \"
'''

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (string_literal)))))
  (item))

================================================================================
backticks
================================================================================

foo := `echo hi`
bar := `echo hi
  echo bye
`

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (external_command)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (external_command)))))
  (item))

================================================================================
indented backticks
================================================================================

foo := ```echo hi```
bar := ```
echo bye  
```
--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (external_command)))))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (external_command))))))

================================================================================
if
================================================================================

foo := if bar == baz { qux } else { quux }

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (if_expression
          (condition
            (expression
              (value
                (identifier)))
            (expression
              (value
                (identifier))))
          (expression
            (value
              (identifier)))
          (expression
            (value
              (identifier)))))))
  (item))

================================================================================
else if
================================================================================

foo := if a == "x" {
  "val"
} else if "1" != "2" {
  foo_fn("val")
} else if "3" == "4" {
  if some_bool { val }
} else { val }

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (if_expression
          (condition
            (expression
              (value
                (identifier)))
            (expression
              (value
                (string_literal))))
          (expression
            (value
              (string_literal)))
          (condition
            (expression
              (value
                (string_literal)))
            (expression
              (value
                (string_literal))))
          (expression
            (value
              (function_call
                (identifier)
                (sequence
                  (expression
                    (value
                      (string_literal)))))))
          (condition
            (expression
              (value
                (string_literal)))
            (expression
              (value
                (string_literal))))
          (expression
            (if_expression
              (condition
                (expression
                  (value
                    (identifier))))
              (expression
                (value
                  (identifier)))))
          (expression
            (value
              (identifier)))))))
  (item))

================================================================================
function
================================================================================

foo := some_fn("param1", param2)

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (assignment
      (identifier)
      (expression
        (value
          (function_call
            (identifier)
            (sequence
              (expression
                (value
                  (string_literal)))
              (expression
                (value
                  (identifier)))))))))
  (item))

================================================================================
export
================================================================================

export foo := "abc"

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (export
      (assignment
        (identifier)
        (expression
          (value
            (string_literal))))))
  (item))

================================================================================
import
================================================================================

import 'foo/bar.just'
import? 'baz.just'

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (import
      (string_literal)))
  (item)
  (item
    (import
      (string_literal)))
  (item)
  (item))

================================================================================
modules
================================================================================

mod foo
mod bar 'PATH'
mod? baz
mod? qux "PATH"

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (module
      (identifier)))
  (item)
  (item
    (module
      (identifier)
      (string_literal)))
  (item)
  (item
    (module
      (identifier)))
  (item)
  (item
    (module
      (identifier)
      (string_literal)))
  (item)
  (item))

================================================================================
set
================================================================================

set SOME_BOOL
set FOO := true
set dotenv-load
set tempdir := "/tmp/just"
set shell := ["powershell.exe", "-c"]

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (setting
      (identifier)))
  (item
    (setting
      (identifier)
      (boolean)))
  (item
    (setting
      (identifier)))
  (item
    (setting
      (identifier)
      (string_literal)))
  (item
    (setting
      (string_literal)
      (string_literal)))
  (item))

================================================================================
comment
================================================================================

# comment
foo := bar # + baz

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (comment))
  (item
    (assignment
      (identifier)
      (expression
        (value
          (identifier)))
      (comment)))
  (item))

================================================================================
shebang
================================================================================

#!/usr/bin/env just

foo:
  body

--------------------------------------------------------------------------------

(source_file
  (item)
  (item
    (comment))
  (item
    (recipe
      (recipe_header
        (identifier))
      (recipe_body
        (recipe_line
          (text)))))
  (item))
